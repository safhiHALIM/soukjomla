<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Badges - NeoSafi</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
</head>
<body class="container mt-5">
    <h2 class="mb-4">🧪 Test des Badges d'Articles</h2>
    
    <div class="alert alert-info">
        <strong>Test :</strong> Vérification du système de badges pour afficher le nombre d'articles dans chaque commande.
    </div>

    <table class="table table-striped">
        <thead>
            <tr>
                <th>Commande</th>
                <th>Nombre d'Articles</th>
                <th>Badge Résultant</th>
            </tr>
        </thead>
        <tbody id="test-results">
            <!-- Sera rempli par JavaScript -->
        </tbody>
    </table>

    <script>
        // Simule les données de commandes 
        const testOrders = [
            { id: 17, total_items_quantity: 37, customer_name: "srht" },
            { id: 16, total_items_quantity: 1, customer_name: "ilvl" },
            { id: 15, total_items_quantity: 0, customer_name: "neworld w3-new" },
            { id: 14, total_items_quantity: null, customer_name: "test null" },
            { id: 13, total_items_quantity: 5, customer_name: "test moyen" },
            { id: 12, total_items_quantity: 15, customer_name: "test gros" }
        ];

        function generateBadge(order) {
            return (() => {
                const count = parseInt(order.total_items_quantity) || 0;
                if (count === 0) return '<span class="badge bg-secondary"><i class="bi bi-x-circle"></i> Aucun article</span>';
                if (count === 1) return '<span class="badge bg-warning"><i class="bi bi-1-circle"></i> 1 article</span>';
                if (count <= 5) return `<span class="badge bg-info"><i class="bi bi-collection"></i> ${count} articles</span>`;
                if (count <= 20) return `<span class="badge bg-primary"><i class="bi bi-box"></i> ${count} articles</span>`;
                return `<span class="badge bg-success"><i class="bi bi-boxes"></i> ${count} articles</span>`;
            })();
        }

        // Génére les résultats de test
        const tbody = document.getElementById('test-results');
        tbody.innerHTML = testOrders.map(order => `
            <tr>
                <td><strong>#${order.id}</strong> - ${order.customer_name}</td>
                <td>${order.total_items_quantity || 0}</td>
                <td>${generateBadge(order)}</td>
            </tr>
        `).join('');

        console.log('✅ Test de badges terminé - vérifiez le tableau ci-dessus');
        console.log('🎯 Si vous voyez des badges colorés avec icônes, le système fonctionne !');
    </script>

    <div class="alert alert-success mt-4">
        <strong>✅ Instructions :</strong>
        <ol>
            <li>Si vous voyez des badges colorés avec des icônes, le système fonctionne parfaitement</li>
            <li>Ouvrez maintenant le panel admin et vérifiez la colonne "Items"</li>
            <li>Vous devriez voir les mêmes badges dans la liste des commandes</li>
        </ol>
    </div>
</body>
</html>