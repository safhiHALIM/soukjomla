<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test - Liste des Commandes Livr√©es</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
</head>
<body class="container mt-5">
    <h2 class="mb-4">üß™ Test de la Section des Commandes Livr√©es</h2>
    
    <div class="alert alert-info">
        <strong>Nouvelles fonctionnalit√©s ajout√©es :</strong>
        <ul class="mb-0">
            <li>‚úÖ <strong>Section "‚úÖ Commandes Livr√©es"</strong> sous la liste principale</li>
            <li>‚úÖ <strong>Filtrage automatique</strong> des commandes avec status = 'delivered'</li>
            <li>‚úÖ <strong>Colonne Supprimer</strong> avec bouton de suppression</li>
            <li>‚úÖ <strong>S√©curit√©</strong> : Seules les commandes livr√©es peuvent √™tre supprim√©es</li>
            <li>‚úÖ <strong>Confirmation</strong> avant suppression d√©finitive</li>
        </ul>
    </div>

    <!-- Simulation de la section commandes livr√©es -->
    <div class="card mt-4">
        <div class="card-header">
            <div class="d-flex justify-content-between align-items-center">
                <h5 class="mb-0">‚úÖ Commandes Livr√©es</h5>
                <div>
                    <span class="badge bg-success">Livr√©es: <span id="deliveredCount">3</span></span>
                </div>
            </div>
        </div>
        <div class="card-body">
            <div class="table-responsive">
                <table class="table" id="deliveredOrdersTable">
                    <thead>
                        <tr>
                            <th>Order ID</th>
                            <th>Customer</th>
                            <th>Total</th>
                            <th>Date Livraison</th>
                            <th>Actions</th>
                            <th>Supprimer</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Exemples de commandes livr√©es -->
                        <tr>
                            <td><strong>#12</strong></td>
                            <td>
                                <div>
                                    <strong>Marie Dupont</strong>
                                    <br><small class="text-muted">marie@email.com</small>
                                </div>
                            </td>
                            <td>
                                <strong class="text-success">$299.99</strong>
                            </td>
                            <td>
                                <small>15/08/2025</small>
                            </td>
                            <td>
                                <div class="btn-group btn-group-sm">
                                    <button class="btn btn-outline-primary" title="Voir d√©tails">
                                        <i class="bi bi-eye"></i>
                                    </button>
                                    <button class="btn btn-outline-info" title="Imprimer">
                                        <i class="bi bi-printer"></i>
                                    </button>
                                </div>
                            </td>
                            <td>
                                <button class="btn btn-sm btn-outline-danger" onclick="testDelete(12)" title="Supprimer cette commande livr√©e">
                                    <i class="bi bi-trash"></i>
                                </button>
                            </td>
                        </tr>
                        <tr>
                            <td><strong>#10</strong></td>
                            <td>
                                <div>
                                    <strong>Jean Martin</strong>
                                    <br><small class="text-muted">jean@email.com</small>
                                </div>
                            </td>
                            <td>
                                <strong class="text-success">$149.99</strong>
                            </td>
                            <td>
                                <small>12/08/2025</small>
                            </td>
                            <td>
                                <div class="btn-group btn-group-sm">
                                    <button class="btn btn-outline-primary" title="Voir d√©tails">
                                        <i class="bi bi-eye"></i>
                                    </button>
                                    <button class="btn btn-outline-info" title="Imprimer">
                                        <i class="bi bi-printer"></i>
                                    </button>
                                </div>
                            </td>
                            <td>
                                <button class="btn btn-sm btn-outline-danger" onclick="testDelete(10)" title="Supprimer cette commande livr√©e">
                                    <i class="bi bi-trash"></i>
                                </button>
                            </td>
                        </tr>
                        <tr>
                            <td><strong>#8</strong></td>
                            <td>
                                <div>
                                    <strong>Sophie Bernard</strong>
                                    <br><small class="text-muted">sophie@email.com</small>
                                </div>
                            </td>
                            <td>
                                <strong class="text-success">$89.99</strong>
                            </td>
                            <td>
                                <small>10/08/2025</small>
                            </td>
                            <td>
                                <div class="btn-group btn-group-sm">
                                    <button class="btn btn-outline-primary" title="Voir d√©tails">
                                        <i class="bi bi-eye"></i>
                                    </button>
                                    <button class="btn btn-outline-info" title="Imprimer">
                                        <i class="bi bi-printer"></i>
                                    </button>
                                </div>
                            </td>
                            <td>
                                <button class="btn btn-sm btn-outline-danger" onclick="testDelete(8)" title="Supprimer cette commande livr√©e">
                                    <i class="bi bi-trash"></i>
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <div class="alert alert-warning mt-4">
        <h6><strong>‚ö†Ô∏è S√©curit√© importante :</strong></h6>
        <ul class="mb-0">
            <li>üîí <strong>Protection</strong> : Seules les commandes avec status="delivered" peuvent √™tre supprim√©es</li>
            <li>üö´ <strong>Blocage</strong> : Impossible de supprimer les commandes pending/processing/shipped</li>
            <li>üí¨ <strong>Confirmation</strong> : Demande de confirmation avant suppression</li>
            <li>üîÑ <strong>Actualisation</strong> : Les deux listes se mettent √† jour apr√®s suppression</li>
        </ul>
    </div>

    <div class="alert alert-success mt-4">
        <h6><strong>‚úÖ Fonctionnement :</strong></h6>
        <ol class="mb-0">
            <li><strong>Chargement</strong> : La section se charge automatiquement avec les commandes livr√©es</li>
            <li><strong>Affichage</strong> : Tableau avec colonnes Order ID, Customer, Total, Date, Actions, Supprimer</li>
            <li><strong>Suppression</strong> : Clic sur le bouton poubelle ‚Üí Confirmation ‚Üí Suppression d√©finitive</li>
            <li><strong>Actualisation</strong> : Les deux tableaux se rechargent apr√®s suppression</li>
        </ol>
    </div>

    <script>
        function testDelete(orderId) {
            if (confirm('‚ö†Ô∏è ATTENTION !\n\n√ätes-vous s√ªr de vouloir supprimer d√©finitivement cette commande livr√©e ?\n\nCette action est irr√©versible et supprimera :\n- La commande et tous ses d√©tails\n- L\'historique de la commande\n- Les √©l√©ments associ√©s\n\nConfirmer la suppression ?')) {
                alert(`‚úÖ Test de suppression pour la commande #${orderId}\n\nDans l'interface r√©elle, cette commande serait supprim√©e de la base de donn√©es.`);
                
                // Simuler la suppression visuelle
                const row = event.target.closest('tr');
                row.style.transition = 'opacity 0.5s ease-out';
                row.style.opacity = '0.3';
                
                setTimeout(() => {
                    row.remove();
                    // Mettre √† jour le compteur
                    const countElement = document.getElementById('deliveredCount');
                    countElement.textContent = parseInt(countElement.textContent) - 1;
                }, 500);
            }
        }
    </script>

    <div class="text-center mt-4">
        <a href="/admin.html" class="btn btn-primary">
            üöÄ Tester dans le Panel Admin
        </a>
    </div>
</body>
</html>